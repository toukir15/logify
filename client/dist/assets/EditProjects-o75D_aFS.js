import{r,a as Z,u as P,j as e,c as U,b as ee}from"./index-C07UJA1Y.js";import{D as $}from"./Date-DlkuwKcp.js";import{B as x,H as h}from"./react-tooltip.min-D1sjDDzu.js";import{C as f}from"./index-CBnerLJD.js";import{S as te,c as z,C as A}from"./index-CzlzJ9GH.js";import"./moment-Cl4UOzQZ.js";const se=l=>e.jsx(z.MultiValue,{...l,children:e.jsxs("div",{className:"flex gap-1 items-center font-medium",children:[e.jsx(A,{size:22})," ",l.data.label]})}),ae=l=>e.jsx(z.Option,{...l,children:e.jsxs("div",{className:"flex gap-1 items-center font-medium",children:[e.jsx(A,{size:22})," ",l.data.label]})}),le=[{value:"construction",label:"Construction"},{value:"schedule",label:"Schedule"},{value:"commercial",label:"Commercial"},{value:"design",label:"Design"}],j={control:l=>({...l,borderColor:"#4256D0",padding:"6px 0",fontSize:"16px","&:hover":{borderColor:"#4256D0"}}),dropdownIndicator:l=>({...l,display:"none"}),indicatorSeparator:l=>({...l,display:"none"}),menu:l=>({...l,display:"none"})},me=()=>{const{projectsData:l,projectsDataRefetch:L}=r.useContext(Z),H=window.location.href.split("/")[5],t=l.find(s=>s._id==H),[b,G]=r.useState(null),[g,W]=r.useState(null),[w,Y]=r.useState({}),[v,K]=r.useState({}),y=r.useRef(null),_=r.useRef(null),C=r.useRef(null),F=r.useRef(null),R=r.useRef(null),I=r.useRef(null),Q=P(),V=(s,i)=>{var N,n,c,o,d,m;if(((c=(n=(N=s.target)==null?void 0:N.files[0])==null?void 0:n.type)==null?void 0:c.split("/")[0])=="image"){const p=new FileReader;p.onload=u=>{i=="add image"?Y({placeholder:u.target.result,file:s.target.files[0]}):i=="risk matrix template"&&K({placeholder:u.target.result,file:s.target.files[0]})},p.readAsDataURL(s.target.files[0])}else console.log((m=(d=(o=s.target)==null?void 0:o.files[0])==null?void 0:d.type)==null?void 0:m.split("/")[0])},X=s=>{var O,B,T,D,J;s.preventDefault();const i=s.target.addImage.files[0],N=s.target.riskMatrixTemplate.files[0],n=(O=s.target.projectName)==null?void 0:O.value,c=(B=s.target.client)==null?void 0:B.value,o=(T=s.target.IDNumber)==null?void 0:T.value,d=(D=s.target.projectValue)==null?void 0:D.value,m=(J=s.target.projectDescription)==null?void 0:J.value,p=y.current.state.selectValue,u=_.current.state.selectValue,E=C.current.state.selectValue,S=F.current.state.selectValue,M=R.current.state.selectValue,q=I.current.state.selectValue;if(!n||!c||!o||!m||!u.length||!E.length||!S.length||!M.length||!q.length||!d||!p.length){U("Some data is messing!","warning");return}const a=new FormData;a.append("add_image",i),a.append("risk_matrix_template",N),a.append("project_name",n),a.append("client",c),a.append("ID_number",o),a.append("project_description",m),a.append("risk_consequences",JSON.stringify(u)),a.append("risk_consequences_impact",JSON.stringify(E)),a.append("risk_categories",JSON.stringify(S)),a.append("likelihood",JSON.stringify(M)),a.append("risk_ratting",JSON.stringify(q)),a.append("project_value",d),a.append("project_owner",JSON.stringify(p)),a.append("start_date",b||t.start_date),a.append("end_date",g||t.end_date),ee.post(`/projects_api/update_project?id=${t._id}`,a,{headers:{"Content-Type":"multipart/form-data"}}).then(k=>{k.status==200&&(L(),Q("/projects"),U("Update project data successfully","success"))}).catch(k=>console.log(k))};return e.jsx("div",{className:"w-full py-20",children:e.jsxs("form",{onSubmit:X,method:"post",className:"flex w-[50%] mx-auto flex-col",children:[e.jsxs("div",{className:"flex w-full items-center mb-6",children:[e.jsx("label",{className:"w-[30%]",htmlFor:"projectName",children:"Project Name"}),e.jsx("input",{defaultValue:t==null?void 0:t.project_name,placeholder:"Enter project name",name:"projectName",id:"projectName",className:"border-primary border w-[70%] p-3 rounded outline-none",type:"text"})]}),e.jsxs("div",{className:"flex w-full items-center mb-6",children:[e.jsx("label",{className:"w-[30%]",htmlFor:"client",children:"Client"}),e.jsx("input",{defaultValue:t==null?void 0:t.client,placeholder:"Enter client name",name:"client",id:"client",className:"border-primary border w-[70%] p-3 rounded outline-none",type:"text"})]}),e.jsxs("div",{className:"flex w-full items-center mb-6",children:[e.jsx("label",{className:"w-[30%]",htmlFor:"IDNumber",children:"ID Number"}),e.jsx("input",{defaultValue:t==null?void 0:t.ID_number,placeholder:"Enter project name",name:"IDNumber",id:"IDNumber",className:"border-primary border w-[70%] p-3 rounded outline-none",type:"text"})]}),e.jsxs("div",{className:"flex w-full items-center mb-6",children:[e.jsx("label",{className:"w-[30%]",htmlFor:"projectDescription",children:"Project Description"}),e.jsx("textarea",{defaultValue:t==null?void 0:t.project_description,className:"border-primary border w-[70%] p-3 rounded outline-none",name:"projectDescription",id:"projectDescription",cols:"10",rows:"4",placeholder:"Write project description"})]}),e.jsxs("div",{className:"flex w-full items-center mb-6",children:[e.jsx("label",{className:"w-[30%]",htmlFor:"date",children:"Date"}),e.jsx("div",{className:"flex w-[70%] gap-6",children:e.jsxs("div",{className:"grid grid-cols-2 gap-6 w-full items-center ",children:[e.jsx($,{dateData:{date:b||(t==null?void 0:t.start_date),setDate:G}}),e.jsx($,{dateData:{date:g||(t==null?void 0:t.end_date),setDate:W}})]})})]}),e.jsxs("div",{className:"flex w-full items-center mb-6",children:[e.jsx("label",{className:"w-[30%]",htmlFor:"projectValue",children:"Project Value"}),e.jsx("input",{defaultValue:t==null?void 0:t.project_value,placeholder:"Enter project value",name:"projectValue",id:"projectValue",className:"border-primary border w-[70%] p-3 rounded outline-none",type:"text"})]}),e.jsxs("div",{className:"flex w-full items-center mb-6",children:[e.jsx("label",{className:"w-[30%]",htmlFor:"projectOwner",children:"Project Owner"}),e.jsx(te,{defaultValue:t==null?void 0:t.project_owner,className:"w-[70%] z-[50]",ref:y,options:le,isClearable:!0,components:{MultiValue:se,Option:ae},isMulti:!0,styles:{control:(s,i)=>({...s,borderColor:(i.isFocused,"#4256D0"),padding:"6px"})}})]}),e.jsxs("div",{className:"flex w-full items-center mb-6",children:[e.jsx("label",{className:"w-[30%]",htmlFor:"addImage",children:"Add Image"}),e.jsx("input",{onChange:s=>V(s,"add image"),name:"add_image",type:"file",id:"addImage",className:"hidden"}),e.jsx("label",{type:"button",htmlFor:"addImage",className:"py-2 px-5 rounded-full text-white text-sm bg-primary cursor-pointer",children:"Upload File"}),w.placeholder&&(t==null?void 0:t.add_image)&&e.jsx("div",{className:"border p-2 ml-2 border-[#4E81CD]",children:e.jsx("img",{className:"h-[30px]",src:w.placeholder,alt:""})}),!w.placeholder&&(t==null?void 0:t.add_image)&&e.jsx("div",{className:"border p-2 ml-2 border-[#4E81CD]",children:e.jsx("img",{className:"h-[30px]",src:`http://localhost:5000/public/uploads/${t==null?void 0:t.add_image}`,alt:""})})]}),e.jsxs("div",{className:"flex w-full items-center mb-6",children:[e.jsxs("div",{className:"w-[30%]  flex items-center gap-2",children:[e.jsx("label",{htmlFor:"",children:"Risk Consequences"}),e.jsx("div",{"data-tooltip-id":"risk-consequences",className:"bg-[#aaaaaa] hover:bg-[#4B5563] rounded-full text-white mt-1 cursor-pointer",children:e.jsx(x,{})}),e.jsx(h,{id:"risk-consequences",content:"Enter your corporate consequence values from your risk matrix table. For example, 'Financial, Environment, Schedule Delay, Reputation, etc  ",style:{width:"350px"},place:"right"})]}),e.jsx(f,{defaultValue:t==null?void 0:t.risk_consequences,placeholder:"Enter risk consequences",ref:_,className:"w-[70%]",isMulti:!0,isClearable:!1,styles:j})]}),e.jsxs("div",{className:"flex w-full items-center mb-6",children:[e.jsxs("div",{className:"w-[30%]  flex items-center gap-2",children:[e.jsx("label",{htmlFor:"",children:"Risk Consequence Impacts"}),e.jsx("div",{"data-tooltip-id":"risk-consequence-impact",className:"bg-[#aaaaaa] hover:bg-[#4B5563] rounded-full text-white mt-1 cursor-pointer",children:e.jsx(x,{})}),e.jsx(h,{id:"risk-consequence-impact",content:"Enter your corporate consequence impacts from your risk matrix table. For example, 'Insignificant, Mirror, Moderate, Major, Significant",style:{width:"350px"},place:"right"})]}),e.jsx(f,{defaultValue:t==null?void 0:t.risk_consequences_impact,placeholder:"Enter risk consequences impact",ref:C,className:"w-[70%]",isMulti:!0,isClearable:!1,styles:j})]}),e.jsxs("div",{className:"flex w-full items-center mb-6",children:[e.jsxs("div",{className:"w-[30%] flex items-center gap-2",children:[e.jsx("label",{htmlFor:"riskCategories",children:"Risk Categories"}),e.jsx("div",{"data-tooltip-id":"risk-categories",className:"bg-[#aaaaaa] hover:bg-[#4B5563] rounded-full text-white mt-1 cursor-pointer",children:e.jsx(x,{})}),e.jsx(h,{id:"risk-categories",content:"Enter generic risk categories to allow grouping of risks. For example, 'Construction. Design, Schedule, Environmental etc. 'If unsure use 'corporate, construction or other generic terms. You can always add more categories in your project page.'",style:{width:"350px"},place:"right"})]}),e.jsx(f,{defaultValue:t==null?void 0:t.risk_categories,placeholder:"Enter risk categories",ref:F,className:"w-[70%]",isMulti:!0,isClearable:!1,styles:j})]}),e.jsxs("div",{className:"flex w-full items-center mb-6",children:[e.jsxs("div",{className:"w-[30%]  flex items-center gap-2",children:[e.jsx("label",{htmlFor:"likelihood",children:"Likelihood"}),e.jsx("div",{"data-tooltip-id":"likelihood",className:"bg-[#aaaaaa] hover:bg-[#4B5563] rounded-full text-white mt-1 cursor-pointer",children:e.jsx(x,{})}),e.jsx(h,{id:"likelihood",content:"Enter your corporate likelihood values. For example, Rare, Unlikely, Possible and almost Certain.",style:{width:"350px"},place:"right"})]}),e.jsx(f,{defaultValue:t==null?void 0:t.likelihood,placeholder:"Enter likelihood",ref:R,className:"w-[70%]",isMulti:!0,isClearable:!1,styles:j})]}),e.jsxs("div",{className:"flex w-full items-center mb-6",children:[e.jsxs("div",{className:"w-[30%]  flex items-center gap-2",children:[e.jsx("label",{htmlFor:"",children:"Risk Rating"}),e.jsx("div",{"data-tooltip-id":"risk-ratting",className:"bg-[#aaaaaa] hover:bg-[#4B5563] rounded-full text-white mt-1 cursor-pointer",children:e.jsx(x,{})}),e.jsx(h,{id:"risk-ratting",content:"Enter your corporate risk ratting values. For example, Low, Medium, High and Critical.",style:{width:"350px"},place:"right"})]}),e.jsx(f,{defaultValue:t==null?void 0:t.risk_ratting,placeholder:"Enter risk ratting",ref:I,className:"w-[70%]",isMulti:!0,isClearable:!1,styles:j})]}),e.jsxs("div",{className:"flex w-full items-center mb-6",children:[e.jsx("label",{className:"w-[30%]",htmlFor:"",children:"Risk matrix template"}),e.jsxs("div",{className:"w-[70%]",children:[e.jsx("input",{onChange:s=>V(s,"risk matrix template"),name:"risk_matrix_template",type:"file",id:"riskMatrixTemplate",className:"hidden"}),e.jsx("label",{type:"button",htmlFor:"riskMatrixTemplate",className:"py-2 px-5 rounded-full text-white text-sm bg-primary cursor-pointer ",children:"Upload File"}),v.placeholder&&(t==null?void 0:t.add_image)&&e.jsx("div",{className:"border p-2 ml-2 border-[#4E81CD] mt-2 rounded",children:e.jsx("img",{src:v.placeholder,alt:""})}),!v.placeholder&&(t==null?void 0:t.risk_matrix_template)&&e.jsx("div",{className:"border p-2 ml-2 border-[#4E81CD] mt-2 rounded",children:e.jsx("img",{src:`http://localhost:5000/public/uploads/${t==null?void 0:t.risk_matrix_template}`,alt:""})})]})]}),e.jsxs("div",{className:"flex w-full items-center my-6",children:[e.jsx("div",{className:"w-[30%]"}),e.jsxs("div",{className:"w-[70%] flex gap-6 ",children:[e.jsx("button",{className:"w-1/2 bg-primary py-3 px-4 text-white rounded-lg",children:"Update Project"}),e.jsx("button",{className:"w-1/2 border border-primary py-3 px-4 rounded-lg",children:"Cancel"})]})]})]})})};export{me as default};
