import{r as c,a as y,j as t,L as f,u as N}from"./index-Qlug-mrU.js";import{h as p}from"./moment-Cl4UOzQZ.js";import{P as b}from"./Pagination-DOm7UIVf.js";const v=()=>{var o,x;const{controlsData:r,controlsDataLoading:d}=c.useContext(y),a=window.location.href.split("/")[7],s=r==null?void 0:r.filter(e=>e.project_id==a&&e.status=="open");if(d)return t.jsx(f,{});const[n,h]=c.useState(1),m=Math==null?void 0:Math.ceil((s==null?void 0:s.length)/7),g=[...(o=Array(m))==null?void 0:o.keys()],l=7*n,u=N();return t.jsxs("div",{className:"py-10",children:[t.jsxs("table",{className:"w-full",children:[s.length>0&&t.jsxs("thead",{children:[t.jsx("th",{className:"text-start pt-4 pb-8 px-3 text-gray font-normal",children:"Control Name"}),t.jsx("th",{className:"text-start pt-4 pb-8 px-3 text-gray font-normal",children:"Control Owner	"}),t.jsx("th",{className:"text-start pt-4 pb-8 px-3 text-gray font-normal",children:"Control Status"}),t.jsx("th",{className:"text-start pt-4 pb-8 px-3 text-gray font-normal",children:"Control Date"}),t.jsx("th",{className:"text-start pt-4 pb-8 px-3 text-gray font-normal",children:"Control Due Date"}),t.jsx("th",{className:"text-start pt-4 pb-8 px-3 text-gray font-normal",children:"Tags"})]}),t.jsx("tbody",{children:(x=s.slice(l-7,l))==null?void 0:x.map((e,j)=>{var i;return t.jsxs("tr",{onClick:()=>{u(`/projects/logs/control/open/${a}/view-control/${e._id}`)},className:"bg-white border-b-[20px] border-light-gray cursor-pointer",children:[t.jsx("td",{className:"py-5 px-4 text-start",children:e.control_name}),t.jsxs("td",{className:"py-5 px-4 text-start",children:[e.control_owner.value," "]}),t.jsxs("td",{className:"py-5 px-4 text-start",children:[e.control_status,e.length>20&&"..."]}),t.jsx("td",{className:"py-5 px-4 text-start",children:t.jsx("p",{className:"bg-[#BBF7D0] w-fit px-3 py-[1px] text-[#158F9C] rounded-full",children:p(e.control_date).format("DD/MM/YYYY")})}),t.jsx("td",{className:"py-5 px-4 text-start",children:t.jsx("p",{className:"bg-[#BBF7D0] w-fit px-3 py-[1px] text-[#158F9C] rounded-full",children:p(e.due_date).format("DD/MM/YYYY")})}),t.jsxs("td",{className:"py-5 px-4 text-start",children:[(i=e.tags[0])==null?void 0:i.value," ",e.tags.length>1&&"..."]})]},j)})})]}),s.length>7&&t.jsx("div",{children:t.jsx(b,{paginationData:{totalButtonArray:g,currentPage:n,setCurrentPage:h}})}),!s.length&&t.jsx("div",{className:"text-center text-2xl font-medium text-gray mt-10",children:"No controls here"})]})};export{v as default};
