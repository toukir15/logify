import{r as l,a as Y,u as K,j as e,c as B,b as Q}from"./index-Qlug-mrU.js";import{D as T}from"./Date-BwA8etRu.js";import{B as m,H as d}from"./react-tooltip.min-hbGUJ866.js";import{C as p}from"./index-O1pEo1kh.js";import{S as X}from"./index-DqzJZgUv.js";import{c as u}from"./useSelectCustomStyle-DUjELx1G.js";import{C as Z,a as ee}from"./CustomOption-Dh-3J-HG.js";import"./moment-Cl4UOzQZ.js";const ne=()=>{const{projectsDataRefetch:J,usersData:x}=l.useContext(Y),U=x==null?void 0:x.map(t=>({value:t.first_name,label:t.first_name,email:t.email})),[h,L]=l.useState(null),[j,H]=l.useState(null),[b,$]=l.useState({}),[g,z]=l.useState({}),w=l.useRef(null),N=l.useRef(null),y=l.useRef(null),v=l.useRef(null),k=l.useRef(null),C=l.useRef(null),G=K(),D=(t,a)=>{var r,i,o;if(((o=(i=(r=t.target)==null?void 0:r.files[0])==null?void 0:i.type)==null?void 0:o.split("/")[0])=="image"){const c=new FileReader;c.onload=n=>{a=="add image"?$({placeholder:n.target.result,file:t.target.files[0]}):a=="risk matrix template"&&z({placeholder:n.target.result,file:t.target.files[0]})},c.readAsDataURL(t.target.files[0])}},W=t=>{var _,V,O,P,A;t.preventDefault();const a=t.target.addImage.files[0],r=t.target.riskMatrixTemplate.files[0],i=(_=t.target.projectName)==null?void 0:_.value,o=(V=t.target.client)==null?void 0:V.value,c=(O=t.target.IDNumber)==null?void 0:O.value,n=(P=t.target.projectValue)==null?void 0:P.value,F=(A=t.target.projectDescription)==null?void 0:A.value,R=w.current.state.selectValue,I=N.current.state.selectValue,S=y.current.state.selectValue,E=v.current.state.selectValue,M=k.current.state.selectValue,q=C.current.state.selectValue;if(!a||!r||!i||!o||!c||!F||!I.length||!S.length||!E.length||!M.length||!q.length||!n||!R.length){B("Some data is messing!","warning");return}const s=new FormData;s.append("file",a),s.append("file",r),s.append("project_name",i),s.append("client",o),s.append("ID_number",c),s.append("project_description",F),s.append("risk_consequences",JSON.stringify(I)),s.append("risk_consequences_impact",JSON.stringify(S)),s.append("risk_categories",JSON.stringify(E)),s.append("likelihood",JSON.stringify(M)),s.append("risk_ratting",JSON.stringify(q)),s.append("project_value",n),s.append("project_owner",JSON.stringify(R)),s.append("start_date",h),s.append("end_date",j),Q.post("/projects_api/add_project",s,{headers:{"Content-Type":"multipart/form-data"}}).then(f=>{f.status==200&&(J(),G("/projects"),B("Added Project Successfully","success"))}).catch(f=>console.log(f))};return e.jsx("div",{className:"w-full py-6 md:py-20",children:e.jsxs("form",{onSubmit:W,method:"post",className:"flex md:w-[50%] mx-auto px-4 flex-col",children:[e.jsxs("div",{className:"flex flex-col md:flex-row w-full md:items-center mb-2 md:mb-6",children:[e.jsx("label",{className:"md:w-[30%] mb-1 ",htmlFor:"projectName",children:"Project Name"}),e.jsx("input",{placeholder:"Enter project name",name:"projectName",id:"projectName",className:"border-primary border md:w-[70%] p-3 rounded outline-none",type:"text"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row w-full md:items-center mb-2 md:mb-6",children:[e.jsx("label",{className:"md:w-[30%] mb-1",htmlFor:"client",children:"Client"}),e.jsx("input",{placeholder:"Enter client name",name:"client",id:"client",className:"border-primary border md:w-[70%] p-3 rounded outline-none",type:"text"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row w-full md:items-center mb-2 md:mb-6",children:[e.jsx("label",{className:"md:w-[30%] mb-1",htmlFor:"IDNumber",children:"ID Number"}),e.jsx("input",{placeholder:"Enter project name",name:"IDNumber",id:"IDNumber",className:"border-primary border md:w-[70%] p-3 rounded outline-none",type:"text"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row w-full md:items-center mb-2 md:mb-6",children:[e.jsx("label",{className:"md:w-[30%] mb-1",htmlFor:"projectDescription",children:"Project Description"}),e.jsx("textarea",{className:"border-primary border md:w-[70%] p-3 rounded outline-none",name:"projectDescription",id:"projectDescription",cols:"10",rows:"4",placeholder:"Write project description"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row w-full md:items-center mb-2 md:mb-6",children:[e.jsx("label",{className:"md:w-[30%] mb-1",htmlFor:"date",children:"Date"}),e.jsx("div",{className:"flex md:w-[70%] gap-6",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 md:gap-6 w-full items-center ",children:[e.jsx(T,{dateData:{date:h,setDate:L}}),e.jsx(T,{dateData:{date:j,setDate:H}})]})})]}),e.jsxs("div",{className:"flex flex-col md:flex-row w-full md:items-center mb-2 md:mb-6",children:[e.jsx("label",{className:"md:w-[30%] mb-1",htmlFor:"projectValue",children:"Project Value"}),e.jsx("input",{placeholder:"Enter project value",name:"projectValue",id:"projectValue",className:"border-primary border md:w-[70%] p-3 rounded outline-none",type:"text"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row w-full md:items-center mb-2 md:mb-6",children:[e.jsx("label",{className:"md:w-[30%] mb-1",htmlFor:"projectOwner",children:"Project Owner"}),e.jsx(X,{className:"md:w-[70%] z-[50]",ref:w,options:U,isClearable:!0,components:{MultiValue:Z,Option:ee},isMulti:!0,styles:{control:(t,a)=>({...t,borderColor:(a.isFocused,"#4256D0"),padding:"6px"})}})]}),e.jsxs("div",{className:"flex flex-col md:flex-row w-full md:items-center mb-2 md:mb-6",children:[e.jsx("label",{className:"md:w-[30%] mb-1",htmlFor:"addImage",children:"Add Image"}),e.jsx("input",{onChange:t=>D(t,"add image"),type:"file",id:"addImage",className:"hidden"}),e.jsx("label",{type:"button",htmlFor:"addImage",className:"py-2 px-5 rounded-full text-white text-sm bg-primary cursor-pointer w-fit",children:"Upload File"}),b.placeholder&&e.jsx("div",{className:"border p-2 ml-2 border-[#4E81CD]",children:e.jsx("img",{className:"h-[30px]",src:b.placeholder,alt:""})})]}),e.jsxs("div",{className:"flex flex-col md:flex-row w-full md:items-center mb-2 md:mb-6",children:[e.jsxs("div",{className:"md:w-[30%]  flex items-center gap-2",children:[e.jsx("label",{className:"mb-1 md:mb-0",htmlFor:"",children:"Risk Consequences"}),e.jsx("div",{"data-tooltip-id":"risk-consequences",className:"bg-[#aaaaaa] hover:bg-[#4B5563] rounded-full text-white mt-1 cursor-pointer",children:e.jsx(m,{})}),e.jsx(d,{id:"risk-consequences",content:"Enter your corporate consequence values from your risk matrix table. For example, 'Financial, Environment, Schedule Delay, Reputation, etc  ",style:{width:"350px"},place:"right"})]}),e.jsx(p,{placeholder:"Enter risk consequences",ref:N,className:"md:w-[70%]",isMulti:!0,isClearable:!1,styles:u})]}),e.jsxs("div",{className:"flex flex-col md:flex-row w-full md:items-center mb-2 md:mb-6",children:[e.jsxs("div",{className:"md:w-[30%]  flex items-center gap-2",children:[e.jsx("label",{className:"mb-1 md:mb-0",htmlFor:"",children:"Risk Consequence Impacts"}),e.jsx("div",{"data-tooltip-id":"risk-consequence-impact",className:"bg-[#aaaaaa] hover:bg-[#4B5563] rounded-full text-white mt-1 cursor-pointer",children:e.jsx(m,{})}),e.jsx(d,{id:"risk-consequence-impact",content:"Enter your corporate consequence impacts from your risk matrix table. For example, 'Insignificant, Mirror, Moderate, Major, Significant",style:{width:"350px"},place:"right"})]}),e.jsx(p,{placeholder:"Enter risk consequences impact",ref:y,className:"md:w-[70%]",isMulti:!0,isClearable:!1,styles:u})]}),e.jsxs("div",{className:"flex flex-col md:flex-row w-full md:items-center mb-2 md:mb-6",children:[e.jsxs("div",{className:"md:w-[30%] flex items-center gap-2",children:[e.jsx("label",{className:"mb-1 md:mb-0",htmlFor:"riskCategories",children:"Risk Categories"}),e.jsx("div",{"data-tooltip-id":"risk-categories",className:"bg-[#aaaaaa] hover:bg-[#4B5563] rounded-full text-white mt-1 cursor-pointer",children:e.jsx(m,{})}),e.jsx(d,{id:"risk-categories",content:"Enter generic risk categories to allow grouping of risks. For example, 'Construction. Design, Schedule, Environmental etc. 'If unsure use 'corporate, construction or other generic terms. You can always add more categories in your project page.'",style:{width:"350px"},place:"right"})]}),e.jsx(p,{placeholder:"Enter risk categories",ref:v,className:"md:w-[70%]",isMulti:!0,isClearable:!1,styles:u})]}),e.jsxs("div",{className:"flex flex-col md:flex-row w-full md:items-center mb-2 md:mb-6",children:[e.jsxs("div",{className:"md:w-[30%]  flex items-center gap-2",children:[e.jsx("label",{className:"mb-1 md:mb-0",htmlFor:"likelihood",children:"Likelihood"}),e.jsx("div",{"data-tooltip-id":"likelihood",className:"bg-[#aaaaaa] hover:bg-[#4B5563] rounded-full text-white mt-1 cursor-pointer",children:e.jsx(m,{})}),e.jsx(d,{id:"likelihood",content:"Enter your corporate likelihood values. For example, Rare, Unlikely, Possible and almost Certain.",style:{width:"350px"},place:"right"})]}),e.jsx(p,{placeholder:"Enter likelihood",ref:k,className:"md:w-[70%]",isMulti:!0,isClearable:!1,styles:u})]}),e.jsxs("div",{className:"flex flex-col md:flex-row w-full md:items-center mb-2 md:mb-6",children:[e.jsxs("div",{className:"md:w-[30%]  flex items-center gap-2",children:[e.jsx("label",{className:"mb-1 md:mb-0",htmlFor:"",children:"Risk Rating"}),e.jsx("div",{"data-tooltip-id":"risk-ratting",className:"bg-[#aaaaaa] hover:bg-[#4B5563] rounded-full text-white mt-1 cursor-pointer",children:e.jsx(m,{})}),e.jsx(d,{id:"risk-ratting",content:"Enter your corporate risk ratting values. For example, Low, Medium, High and Critical.",style:{width:"350px"},place:"right"})]}),e.jsx(p,{placeholder:"Enter risk ratting",ref:C,className:"md:w-[70%]",isMulti:!0,isClearable:!1,styles:u})]}),e.jsxs("div",{className:"flex flex-col md:flex-row w-full md:items-center mb-2 md:mb-6",children:[e.jsx("label",{className:"md:w-[30%] mb-1",htmlFor:"",children:"Risk matrix template"}),e.jsxs("div",{className:"md:w-[70%]",children:[e.jsx("input",{onChange:t=>D(t,"risk matrix template"),type:"file",id:"riskMatrixTemplate",className:"hidden"}),e.jsx("label",{type:"button",htmlFor:"riskMatrixTemplate",className:"py-2 px-5 rounded-full text-white text-sm bg-primary cursor-pointer ",children:"Upload File"}),g.placeholder&&e.jsx("div",{className:"border p-2 ml-2 border-[#4E81CD] mt-2 rounded",children:e.jsx("img",{src:g.placeholder,alt:""})})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row w-full md:items-center my-6",children:[e.jsx("div",{className:"md:w-[30%] mb-1"}),e.jsxs("div",{className:"md:w-[70%] flex gap-6 ",children:[e.jsx("button",{className:"w-1/2 bg-primary py-3 px-4 text-white rounded-lg",children:"Add Project"}),e.jsx("button",{className:"w-1/2 border border-primary py-3 px-4 rounded-lg",children:"Cancel"})]})]})]})})};export{ne as default};
