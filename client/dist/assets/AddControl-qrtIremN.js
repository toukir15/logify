import{r as s,a as F,u as R,j as e,c as w,b as E}from"./index-Qlug-mrU.js";import{J as A,u as B}from"./useJoditConfig-BOSgAz-Y.js";import{S as I}from"./index-DqzJZgUv.js";import{B as b,H as g}from"./react-tooltip.min-hbGUJ866.js";import{C as $}from"./index-O1pEo1kh.js";import{D as N}from"./Date-BwA8etRu.js";import{C as J,a as M}from"./CustomOption-Dh-3J-HG.js";import{c as O}from"./useSelectCustomStyle-DUjELx1G.js";import"./moment-Cl4UOzQZ.js";const K=()=>{const{projectsData:v,controlsDataRefeatch:C}=s.useContext(F),i=s.useRef(null),d=s.useRef(null),m=s.useRef(null),[a,y]=s.useState(null),[r,D]=s.useState(null),u=R(),n=window.location.href.split("/")[8],x=window.location.href.split("/")[6],c=v.find(t=>t._id==n),S=t=>{t.preventDefault();const o=t.target.controlName.value,p=i.current.value,f=d.current.props.value,h=m.current.props.value,j=t.target.controlStatus.value;if(!o||!p||!h||!f||!j||!a||!r){w("Some data is messing!","warning");return}const _={control_name:o,control_date:a,control_status:j,comment:p,due_date:r,control_owner:f,tags:h,project_id:n,status:x};E.post("/controls_api/add_control",_).then(l=>{console.log(l),l.data.insertedId&&(C(),u(`/projects/logs/control/${x}/${n}`),w("Added Successfully Control","success"))}).catch(l=>console.log(l))};return e.jsx("div",{className:"w-full py-10",children:e.jsxs("form",{onSubmit:S,className:"flex w-[60%] mx-auto flex-col",children:[e.jsxs("div",{className:"flex w-full items-center mb-6",children:[e.jsxs("div",{className:"w-[30%]  flex items-center gap-2",children:[e.jsx("label",{htmlFor:"",children:"Control Name"}),e.jsx("div",{"data-tooltip-id":"control-name",className:"bg-[#aaaaaa] hover:bg-[#4B5563] rounded-full text-white mt-1 cursor-pointer",children:e.jsx(b,{})}),e.jsx(g,{id:"control-name",content:"High level description an action or control, for example 'Engage architect for Project X. ",style:{width:"350px"},place:"right"})]}),e.jsx("input",{placeholder:"Enter control name",name:"controlName",id:"controlName",className:"border-primary border w-[70%] p-3 rounded outline-none",type:"text"})]}),e.jsxs("div",{className:"flex w-full items-center mb-6",children:[e.jsx("label",{className:"w-[30%]",htmlFor:"",children:"Control Date"}),e.jsx("div",{className:"w-[70%]",children:e.jsx(N,{dateData:{date:a,setDate:y}})})]}),e.jsxs("div",{className:"flex w-full items-center mb-6",children:[e.jsxs("div",{className:"w-[30%]  flex items-center gap-2",children:[e.jsx("label",{htmlFor:"",children:"Control Status"}),e.jsx("div",{"data-tooltip-id":"control-status",className:"bg-[#aaaaaa] hover:bg-[#4B5563] rounded-full text-white mt-1 cursor-pointer",children:e.jsx(b,{})}),e.jsx(g,{id:"control-status",content:"This is an ongoing log on the status of this task, for example every time during a meeting or new milestone there's a progress update you can log the status of this control'",style:{width:"350px"},place:"right"})]}),e.jsx("textarea",{className:"border-primary border w-[70%] p-3 rounded outline-none",name:"controlStatus",id:"controlStatus",cols:"10",rows:"4",placeholder:"Write project status"})]}),e.jsxs("div",{className:"flex w-full items-center mb-6",children:[e.jsx("label",{className:"w-[30%]",htmlFor:"",children:"Comment"}),e.jsx("div",{className:"w-[70%] border border-primary rounded",children:e.jsx(A,{ref:i,config:B,tabIndex:1})})]}),e.jsxs("div",{className:"flex w-full items-center mb-6",children:[e.jsx("label",{className:"w-[30%]",htmlFor:"",children:"Due Date"}),e.jsx("div",{className:"w-[70%]",children:e.jsx(N,{dateData:{date:r,setDate:D}})})]}),e.jsxs("div",{className:"flex w-full items-center mb-6",children:[e.jsx("label",{className:"w-[30%]",htmlFor:"",children:"Control Owner"}),e.jsx(I,{ref:d,className:"w-[70%] z-[50]",options:c==null?void 0:c.project_owner,isClearable:!0,components:{CustomMultiValue:J,CustomOption:M},styles:{control:(t,o)=>({...t,borderColor:(o.isFocused,"#4256D0"),padding:"6px"})}})]}),e.jsxs("div",{className:"flex w-full items-center mb-6",children:[e.jsx("label",{className:"w-[30%]",htmlFor:"",children:"Tags"}),e.jsx($,{placeholder:"Tags",ref:m,className:"w-[70%]",isMulti:!0,isClearable:!1,styles:O})]}),e.jsxs("div",{className:"flex w-full items-center mb-6",children:[e.jsx("label",{className:"w-[30%]",htmlFor:""}),e.jsxs("div",{className:"w-[70%] flex gap-8",children:[e.jsx("button",{className:"bg-primary py-3 w-full text-white rounded-lg",children:"Add Control"}),e.jsx("button",{type:"button",onClick:()=>u("/projects"),className:"border border-primary text-primary py-3 w-full rounded-lg",children:"Cancel"})]})]})]})})};export{K as default};
